## 👨‍💻 NODE JS CRASH COURSE - 자습자습

### Context

    1. What is NodeJS?
    2. JavaScript Basic Review
    3. Functions of NodeJS
    4. Establishing Server
    5. Package Manager
    6. Express Web Server
    7. MYSQL / MONGODB

### 1. What is NodeJS?

    NodeJS 는 Chrome V8 JavaScript 엔진으로 빌드된 JavaScript 런타임 입니다.

    - 런타임 ? 특정 언어로 만든 프로그램을 실행 할 수 있는 환경을 의미.
        노드는 자바스크립트 프로그램을 컴퓨터에서 실행 할 수 있다. (자바스크립트 실행기)

    - 기존에는 자바스크립트 프로그램을 웹 브라우저 위에서만 실행할 수 있었다. 브라우저 ( safari , chrome , .. ) 는 자바 스크립트 런타임을 내장하여 JS 코드 실행 가능 but, 브라우저 외의 환경에서는 실행 하려 했지만, 실행 속도 문제의 벽에 막힘.

    - 구글의 V8 엔진으로 크롬을 출시하면서, 속도 문제 해결 -> v8 엔진 기반의 노드 프로젝트 시작.

    - Node 는 V8 ( 오픈 소스 자바스크립트 엔진 ) + libuv ( 비동기 I/O 라이브러리 -> 이벤트 기반, 논 블로킹 I/O 모델 구현 ) 으로 구성

    - 이벤트 기반 ? ( event-driven ) 이벤트가 발생할 떄 미리 지정해둔 작업을 수행하는 방식을 의미. (ex.. 클릭, 네트워크요청 ..) 특정 이벤트가 발생할 때 무엇을 할지 미리 등록해 두어야 한다. 이를 이벤트 리스너에 콜백 함수를 등록 한다. 로 표현
        노드 또한 이벤트 기반 방식으로 동작 한다. 이벤트가 발생하면 이벤트 리스너에 등록해둔 콜백 함수를 호출. 발생한 이벤트가 없거나 이벤트를 다 처리하게 되면, 노드는 다음 이벤트가 발생할 때까지 대기한다.

    - 이벤트 루프 ? ( event-loop ) 여러 이벤트가 동시에 발생했을 때 어떤 순서로 콜백 함수를 호출할지를 이벤트 루프가 판단한다.
        노드는 자바스크립트 코드의 맨 위부터 한줄씩 실행, 함수 호출 부분을 발견했다면, 호출한 함수를 호출 스택에 넣는다.
        전역 컨텍스트 (  global context ) - > 함수가 호출 되었을 때, 생성되는 환경을 의미한다. 자바스크립트 코드는 실행시 기본적으로 전역 컨텍스트 안에서 돌아간다. 함수는 실행되는 동안 호출 스택에 머물러 있다가 실행이 완료되면 호출 스택에서 지워진다.

        그래서 이벤트 루프란 ?  이벤트 발생시 호출할 콜백 함수를 관리하고, 호출된 콜백 함수의 실행순서를 결정하는 역할을 담당한다. 노드가 종료될 때까지 이벤트 처리를 위한 작업을 반복 하므로, 루프라고 부른다.

```javascript
function run() {
  console.log("execute after 3 sec");
}

console.log("start");
setTimeout(run, 3000);
console.log("end");
```

    그렇다면, 위의 setTimeout 함수의 콜백인 run이 호출 스택에 언제 들어가는지 지금까지 배운 내용으로는 쉽게 파악할 수 없다. 이를 파악하기 위해서는 이벤트 루프, 태스크 큐 ( Task Queue ) , 백그라운드 ( background ) 에 대한 지식이 필요하다.

    - 백그라운드 ? setTimeout 같은 타이머나 이벤트 리스너들이 대기하는 곳. 자바스크립트가 아닌 다른 언어로 작성된 프로그램이라고 봐도 된다. 여러 작업이 동시에 실행될 수 있다.

    - 태스크 큐 ? 이벤트 발생 후, 백그라운드에서는 태스크 큐로 타이머나 이벤트 리스너의 콜백 함수를 보낸다. 정해진 순서대로 콜백들이 줄을 서있으므로 콜백 큐라고도 부른다. 콜백들은 보통 완료된 순서대로 줄을 서 있지만, 특정한 경우에는 순서가 바뀌기도 한다.
